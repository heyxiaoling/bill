function Bill(){this.sta=null,this.ans=null,this.sor=null,this.ino=null,this.settings={usd:21+parseInt(40*Math.random()),cny:1e3+parseInt(1e3*Math.random()),s_page:!1,ac_s:!1,o_time:null,a_num:0,a_ri:!1,i_fo:!1,so_m:null,username:null,i_oh:null,time:{_time:90,_time_c:0,_time_s:0,_time_w:0},style:{dH:$(document).height(),dW:$(document).width(),wW:$(window).width(),wH:$(window).height(),sH:$(window).scrollTop()}}}function _time(t){var i,n,e,s,a,o="00:00:00";return 1e3>t?(10>t&&(t="0"+t),o="00:00:"+t):t>=1e3&&6e4>t?(i=t%1e3,a=parseInt(t/1e3),n=a%60,10>i&&(i="0"+i),10>n&&(n="0"+n),o="00:"+n+":"+i):t>=6e4&&36e5>t?(i=t%1e3,a=parseInt(t/1e3),n=parseInt(a%60),e=parseInt(a/60)%60,10>i&&(i="0"+i),10>n&&(n="0"+n),10>e&&(e="0"+e),o=""+e+":"+n+":"+i):t>=36e5&&144e5>t&&(i=t%1e3,a=parseInt(t/1e3),n=parseInt(a%60),e=parseInt(a/60)%60,s=parseInt(a/60/60)%60,10>i&&(i="0"+i),10>n&&(n="0"+n),10>e&&(e="0"+e),10>s&&(s="0"+s),o=""+s+":"+e+":"+n+":"+i),o}function s_time(t){for(var i=t.split(":"),n=[],e=0;e<i.length;e++)n[e]=parseInt(i[i.length-1-e]);var s=0;switch(n.length){case 0:return s=0;case 1:return s=n[0];case 2:return s=n[0]+1e3*n[1];case 3:return s=n[0]+1e3*n[1]+60*n[2]*1e3;case 4:return s=n[0]+1e3*n[1]+60*n[2]*1e3+60*n[3]*60*1e3;default:return s=0}}function checkMobile(t){var i=/^1\d{10}$/;return i.test(t)?!0:!1}var WX={};Bill.prototype.init=function(t,i){this.sta=$(t.start),this.ans=$(t.answer),this.sor=$(t.sort),this.ino=$(t.info),this.settings=$.extend(!0,{},this.settings,i),this._set()},Bill.prototype._set=function(){var t=this;return parseInt(t.settings.style.wH)>1008&&$(".page").height(t.settings.style.wH),"sort"==window.location.href.split("?")[1]?(t.settings.s_page=!0,$("#welcome").animate({opacity:0},1e3,function(){$(this).remove()}),$("#spinner").animate({opacity:0},1e3,function(){$(this).remove(),t._s_s()}),!1):(t.ans.find(".bo-bg .blackboard p cite").html(t.settings.usd),t.ans.find(".bo-bg .blackboard p em").html(t.settings.cny),void t.load())},Bill.prototype.load=function(){var t=this;window.onload=function(){$("#welcome").animate({opacity:0},1e3,function(){$(this).remove()}),$("#spinner").animate({opacity:0},1e3,function(){$(this).remove(),t._start()})}},Bill.prototype._start=function(){var t=this;t.sta.css({visibility:"visible"}).addClass("startin"),t.sta.find(".bo-bg .start-btn")[0].addEventListener("click",function(){t._rule()},!1)},Bill.prototype._rule=function(){function t(){a.animate({opacity:0},1e3,function(){a.remove()}),o.animate({opacity:0},1e3,function(){o.remove(),i._down()})}var i=this,n=$("body");if(0!=$("div[name=mask]").length)return!1;var e="<div class='mask' id='mask' name='mask'></div>",s="<div class='_rule' id='_rule'><cite></cite></div>";n.append(e),n.append(s);var a=$("#mask"),o=$("#_rule");o.find("cite")[0].addEventListener("touchstart",function(){t()},!1)},Bill.prototype._down=function(){var t=this,i=$("body");if(0!=$("div[name=mask]").length)return!1;var n="<div class='mask' id='mask' name='mask'></div>",e="<div class='down' id='down'><span class='span1'></span></div>";i.append(n),i.append(e);var s=$("#mask"),a=$("#down");setTimeout(function(){a.append("<span class='span2'></span>")},600),setTimeout(function(){a.append("<span class='span3'></span>")},1200),setTimeout(function(){s.remove(),a.remove(),t.sta.addClass("startout")},1600),setTimeout(function(){t.sta.css({visibility:"hidden"}),t.ans.css({visibility:"visible"}).addClass("answerin")},3200),setTimeout(function(){t._answer()},4400)},Bill.prototype._answer=function(){var t=this,i=(new Date).getTime();t.settings.a_num+=1,t.settings.o_time=setInterval(function(){var n=(new Date).getTime();return 1e3*(t.settings.time._time-10)<=n-i&&(t.ans.find("#audio")[0].play(),t.ans.find(".clock").addClass("clockin")),1e3*t.settings.time._time<=n-i?(t.ans.find("#audio")[0].pause(),t.ans.find(".clock").removeClass("clockin"),t.ans.find(".clock span").text(_time(t.settings.a_num*t.settings.time._time*1e3)),t._ans_t_o(),clearInterval(t.settings.o_time),!1):(t.ans.find("#audio")[0].pause(),void t.ans.find(".clock span").text(_time(n-i+(t.settings.a_num-1)*t.settings.time._time*1e3)))},1),t.ans.find(".bo-bg .ans span")[0].addEventListener("touchstart",function(){t._ans_form()}),t._input_in(t.ans.find("#usd")),t._input_out(t.ans.find("#usd")),t._input_in(t.ans.find("#cny")),t._input_out(t.ans.find("#cny"))},Bill.prototype.n_answer=function(){var t=this,i=(new Date).getTime();t.settings.o_time=setInterval(function(){var n=(new Date).getTime();return 1e3*(t.settings.time._time-10)<=n-i&&(t.ans.find("#audio")[0].play(),t.ans.find(".clock").addClass("clockin")),1e3*t.settings.time._time<=n-i?(t.ans.find("#audio")[0].pause(),t.ans.find(".clock").removeClass("clockin"),t.ans.find(".clock span").text(_time(1e3*t.settings.time._time)),t._ans_t_o(),clearInterval(t.settings.o_time),!1):(t.ans.find("#audio")[0].pause(),void t.ans.find(".clock span").text(_time(n-i)))},1),t.ans.find(".bo-bg .ans span")[0].addEventListener("touchstart",function(){t._ans_form()})},Bill.prototype._input_in=function(t){t.focus(function(t){$(this).css({"border-color":"#f08850"}),$(this).siblings("cite").hide()})},Bill.prototype._input_out=function(t){t.blur(function(t){$(this).css({"border-color":"#7287e0"})})},Bill.prototype._ans_form=function(){var t=this,i=t.ans.find("#usd").val(),n=t.ans.find("#cny").val(),e=t.ans.find(".ans-list li").eq(0).find("cite"),s=t.ans.find(".ans-list li").eq(1).find("cite");return""==i?(e.show(),!1):""==n?(s.show(),!1):(t.ans.find("#usd").blur(),t.ans.find("#cny").blur(),t.settings.usd-20==parseInt(i)&&t.settings.cny==parseInt(n)?(clearInterval(t.settings.o_time),t.settings.time._time_s=t.ans.find(".clock span").text(),setTimeout(function(){t._r_box()},300),!1):(setTimeout(function(){t._ans_wr()},300),!1))},Bill.prototype._r_box=function(){var t=this;t.settings.a_ri=!0;var i=$("body");if(0!=$("div[name=mask]").length)return!1;var n="<div class='mask' id='mask' name='mask'></div>",e="<div class='a-ri' id='a-ri'></div><div class='a-ri-l' id='a-ri-l'></div>";i.append(n),i.append(e);var s=$("#mask"),a=$("#a-ri"),o=$("#a-ri-l");setTimeout(function(){s.animate({opacity:0},1e3,function(){s.remove(),o.remove(),a.remove(),t._info()}),a.animate({opacity:0},1e3),o.animate({opacity:0},1e3)},2e3)},Bill.prototype._ans_wr=function(){function t(){a.animate({opacity:0},1e3,function(){a.remove()}),o.animate({opacity:0},1e3,function(){o.remove()}),$("#share1").remove()}var i=this,n=$("body");if(0!=$("div[name=mask]").length)return!1;var e="<div class='mask' id='mask' name='mask'></div>",s="<div class='key' id='key'><div class='key-wro'><p></p><em></em><span>发给小伙伴找寻真相</span><strong>查看排行榜</strong></div><cite></cite></div>";n.append(e),n.append(s);var a=$("#mask"),o=$("#key");wx.onMenuShareTimeline({title:"我参加了搜航网“算积分，赢话费”活动，答对一道题就有可能赢得百元话费。",link:"http://www.sofreight.com/Static/Weixin/bill.html",imgUrl:"http://www.sofreight.com/resource/wx/images/bill.jpg",success:function(){},cancel:function(){}}),o.find("cite")[0].addEventListener("touchstart",function(){t(),s_time(i.ans.find(".clock span").text())<1e3*i.settings.time._time?i.c_ans():i._ans_c()},!1),o.find(".key-wro strong")[0].addEventListener("touchstart",function(){t(),clearInterval(i.settings.o_time),i._s_s()},!1),o.find(".key-wro span")[0].addEventListener("touchstart",function(){clearInterval(i.settings.o_time),i._share_l()},!1)},Bill.prototype._ans_t_o=function(){function t(){a.animate({opacity:0},1e3,function(){a.remove()}),o.animate({opacity:0},1e3,function(){o.remove()})}var i=this,n=$("body");if(0!=$("div[name=mask]").length)return!1;var e="<div class='mask' id='mask' name='mask'></div>",s="<div class='key' id='key'><div class='key-wrr'><p></p><em></em><span>加时重做</span></div><cite></cite></div>";n.append(e),n.append(s);var a=$("#mask"),o=$("#key");o.find("cite")[0].addEventListener("touchstart",function(){t(),i._ans_c()},!1),o.find(".key-wrr span")[0].addEventListener("touchstart",function(){t(),i._ans_c()},!1)},Bill.prototype._ans_c=function(){var t=this;clearInterval(t.settings.o_time);var i=s_time(t.ans.find(".clock span").text()),n=(new Date).getTime();t.settings.o_time=setInterval(function(){var e=(new Date).getTime();t.ans.find(".clock span").text(_time(e-n+i))},1)},Bill.prototype.c_ans=function(){var t=this;clearInterval(t.settings.o_time);var i=s_time(t.ans.find(".clock span").text()),n=(new Date).getTime();t.settings.o_time=setInterval(function(){var e=(new Date).getTime();return 1e3*(t.settings.time._time-10)<=e-n+i&&(t.ans.find("#audio")[0].play(),t.ans.find(".clock").addClass("clockin")),1e3*t.settings.time._time<=e-n+i?(t.ans.find("#audio")[0].pause(),t.ans.find(".clock").removeClass("clockin"),t.ans.find(".clock span").text(_time(t.settings.a_num*t.settings.time._time*1e3)),t._ans_t_o(),clearInterval(t.settings.o_time),!1):(t.ans.find(".clock span").text(_time(e-n+i+(t.settings.a_num-1)*t.settings.time._time*1e3)),void t.ans.find(".clock span").text(_time(e-n+i)))},1)},Bill.prototype._info=function(){var t=this;t.ans.css({visibility:"hidden"}),t.ino.css({visibility:"visible"}).addClass("infoin"),t.ans.removeClass("answerin"),t._input_in(t.ino.find(".sub-list li").eq(0).find("input")),t._input_out(t.ino.find(".sub-list li").eq(0).find("input")),t._input_in(t.ino.find(".sub-list li").eq(1).find("input")),t._input_out(t.ino.find(".sub-list li").eq(1).find("input")),t.ino.find(".bo-bg span")[0].addEventListener("touchstart",function(){t._info_form()},!1)},Bill.prototype._info_form=function(){var t=this,i=t.ino.find(".sub-list li").eq(0).find("input").val(),n=t.ino.find(".sub-list li").eq(1).find("input").val(),e=t.ino.find(".sub-list li").eq(0).find("cite"),s=t.ino.find(".sub-list li").eq(1).find("cite");return""==i?(e.show(),!1):""==n||checkMobile(n)?(checkMobile(n)&&(t.settings.ac_s=!0,t.settings.i_fo=!0),t.ino.find(".sub-list li").eq(0).find("input").blur(),t.ino.find(".sub-list li").eq(1).find("input").blur(),t.settings.ac_s?(t.settings.username=i,t.settings.i_oh=n,void t._sort()):(t.settings.ac_s=!0,t.ino.find(".i-text").css({opacity:1}),!1)):(s.show(),!1)},Bill.prototype._sort=function(){var t=this;t._s_s()},Bill.prototype._s_s=function(){var t=this,i=$("body");if(t.settings.a_ri){var n="<div class='mask' id='mask' name='mask'></div>",e="<div class='sort-box' id='sort-box'><strong>"+t.settings.username+"</strong><p>您用时: <span>"+t.settings.time._time_w+"</span></p><p>排名：<span>第"+t.settings.so_m+"名</span></p></div>";i.append(n),i.append(e);var s=$("#mask"),a=$("#sort-box");setTimeout(function(){s.animate({opacity:0},1e3,function(){s.remove()}),a.animate({opacity:0},1e3,function(){a.remove()})},2e3)}t.settings.a_ri&&parseInt(t.settings.so_m)>7?wx.onMenuShareTimeline({title:"我在搜航网“算积分，赢话费”活动中暂排第"+t.settings.so_m+"，离话费大奖还有距离，你也来挑战吧",link:"http://www.sofreight.com/Static/Weixin/bill.html",imgUrl:"http://www.sofreight.com/resource/wx/images/bill.jpg",success:function(){},cancel:function(){}}):t.settings.a_ri&&parseInt(t.settings.so_m)<7&&wx.onMenuShareTimeline({title:"我在搜航网“算积分，赢话费”活动中暂排第"+t.settings.so_m+"，话费大奖唾手可得，你也来参加吧！",link:"http://www.sofreight.com/Static/Weixin/bill.html",imgUrl:"http://www.sofreight.com/resource/wx/images/bill.jpg",success:function(){},cancel:function(){}}),t.ans.css({visibility:"hidden"}),t.ino.css({visibility:"hidden"}),t.sor.css({visibility:"visible"}).addClass("sortin"),t.ans.removeClass("answerin"),t.ino.removeClass("infoin"),t.ino.find(".i-text").css({opacity:0}),t.sor.find(".bo-bg span")[0].addEventListener("touchstart",function(){t._share()},!1)},Bill.prototype._share=function(){var t=this,i=$("body");if(0!=$("div[name=mask]").length)return!1;var n,e="<div class='mask' id='mask' name='mask'></div>";n=t.settings.s_page?"<div class='share' id='share'></div>":"<div class='share' id='share'><span></span></div>",i.append(e),i.append(n);var s=$("#share"),a=$("#mask");a[0].addEventListener("touchstart",function(){a.animate({opacity:0},1e3,function(){a.remove(),s.remove()})},!1),s.find("span")[0].addEventListener("touchstart",function(){a.animate({opacity:0},1e3,function(){a.remove()}),s.animate({opacity:0},1e3,function(){s.remove(),t.n_start()})},!1)},Bill.prototype.n_start=function(){var t=this;t.settings.usd=21+parseInt(40*Math.random()),t.settings.cny=1e3+parseInt(1e3*Math.random()),t.ans.find(".bo-bg .blackboard p cite").html(t.settings.usd),t.ans.find(".bo-bg .blackboard p em").html(t.settings.cny),t.ans.find(".clock span").text("00:00:00"),t.sor.find(".time").css({opacity:0}),t.settings.ac_s=!1,t.sor.css({visibility:"hidden"}).removeClass("sortin"),t.ans.css({visibility:"visible"}).addClass("answerin"),setTimeout(function(){t.n_answer()},1200)},Bill.prototype._share_l=function(){var t="<div class='share1' id='share1'></div>",i=$("body");i.append(t)};